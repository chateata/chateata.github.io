import{_ as de,R as ce,X as ve,j as me,Y as fe,Z as ge,l as pe,$ as be,k as ye,c as b,o as u,b as v,a0 as Q,F as K,q as X,e as y,w as k,g as S,f as I,y as A,z as j,A as ke,O as _e,W as f,u as he,V as Y,D as we,E as T,n as C,m as D}from"./index-BaLn3tjY.js";import{a as N}from"./index-NIGUFBhG.js";const Ce={name:"DrugFiltering",components:{ArrowLeft:ye,Check:be,Loading:pe,Clock:ge,VideoPlay:fe,ArrowRight:me,View:ve,Refresh:ce},setup(){const P=he(),n=ke(),_=A([{key:"admet",label:"ADMET & 基础理化性质筛选",status:"current"},{key:"boltz",label:"AI配体靶点构象预测",status:"pending"},{key:"multiscore",label:"综合多维度总和评分",status:"pending"}]),r=A("admet"),h=A(!1),p=A(0),d=A({admet:!1,boltz:!1,multiscore:!1}),g=A({totalDrugs:0,passedDrugs:0,passedDrugsList:[],allResults:[]}),i=A({taskId:null,status:"pending",results:null,error:null}),m=A({taskId:null,status:"pending",results:null,error:null,progress:0}),E=A(0),z=A("pending"),w=A("等待开始"),x=A(null),B=j(()=>{const t=n.getters.generatedDrugs;console.log("Store中的generatedDrugs数据:",t);let a=[];t&&(Array.isArray(t)?a=t:t.rows&&Array.isArray(t.rows)?a=t.rows:t.data&&Array.isArray(t.data)&&(a=t.data)),console.log("处理后的药物数组:",a);const l=a.filter(e=>e&&e.selected);return console.log("选中的药物:",l),l}),c=async t=>{var a,l;try{console.log("开始调用ADMET筛选API，药物数据:",t);const e={disease:"cancer",save_results:!1,drug_list:t.map((o,M)=>({index:M,smiles:o.smiles||"Unknown",metadata:{name:o.name||"Unknown",generationMethod:o.generationMethod||"Unknown",confidence:o.confidence||0,compositeScore:o.compositeScore||0,qualityLabel:o.qualityLabel||"Unknown",molecularWeight:o.molecularWeight||0,logp:o.logp||0,pocket:o.pocket||"Unknown"},count:1}))};console.log("ADMET API请求数据:",e);const s=await N({method:"post",url:"/admet/screen",headers:{"Content-Type":"application/json"},data:e,timeout:6e5,validateStatus:function(o){return o>=200&&o<300}});return console.log("ADMET API响应结果:",s.data),s.data}catch(e){console.error("ADMET API调用失败:",e);let s="未知错误";e.response?(console.error("错误响应:",e.response.data),console.error("状态码:",e.response.status),s=`服务器错误: ${e.response.status} - ${((a=e.response.data)==null?void 0:a.msg)||((l=e.response.data)==null?void 0:l.message)||e.response.statusText}`):e.request?(console.error("网络错误:",e.request),s="网络连接失败，请检查网络连接或联系管理员"):(console.error("请求配置错误:",e.message),s=`请求错误: ${e.message}`);const o=new Error(s);throw o.originalError=e,o}},q=async t=>{var a,l;try{console.log("开始调用Boltz筛选API，药物数据:",t);const e=n.state.currentPdbId||"1UWH";console.log("使用PDB ID:",e);const s={pdb_id:e,enable_affinity:!0,generate_msa:!0,use_gpu:!0,drug_list:t.map((M,R)=>{console.log(`处理第${R+1}个药物数据:`,M);const L=M.metadata||{},H={name:L.name||M.name||`Drug_${R+1}`,category:L.generationMethod||"基于结构生成",molecular_formula:`C${Math.round(L.molecularWeight||0)}`,source:L.pocket||"Unknown",target:e};return console.log(`第${R+1}个药物映射后的metadata:`,H),{index:R+1,smiles:M.smiles||"Unknown",metadata:H,count:10}})};console.log("Boltz API请求数据:",s);const o=await N({method:"post",url:"/boltz/run",headers:{"Content-Type":"application/json"},data:s,timeout:3e4,validateStatus:function(M){return M>=200&&M<300}});return console.log("Boltz API响应结果:",o.data),o.data}catch(e){console.error("Boltz API调用失败:",e);let s="未知错误";e.response?s=`服务器错误: ${e.response.status} - ${((a=e.response.data)==null?void 0:a.msg)||((l=e.response.data)==null?void 0:l.message)||e.response.statusText}`:e.request?s="网络连接失败，请检查网络连接或联系管理员":s=`请求错误: ${e.message}`;const o=new Error(s);throw o.originalError=e,o}},F=async t=>{var a,l;try{console.log("查询Boltz任务状态，任务ID:",t);const e=await N({method:"get",url:`/boltz/status/${t}`,headers:{"Content-Type":"application/json"},timeout:1e4,validateStatus:function(s){return s>=200&&s<300}});return console.log("Boltz状态查询响应:",e.data),e.data}catch(e){console.error("Boltz状态查询失败:",e);let s="未知错误";e.response?s=`服务器错误: ${e.response.status} - ${((a=e.response.data)==null?void 0:a.msg)||((l=e.response.data)==null?void 0:l.message)||e.response.statusText}`:e.request?s="网络连接失败，请检查网络连接或联系管理员":s=`请求错误: ${e.message}`;const o=new Error(s);throw o.originalError=e,o}},U=async t=>{var a,l;try{console.log("查询Boltz任务结果，任务ID:",t);const e=await N({method:"get",url:`/boltz/result/${t}`,headers:{"Content-Type":"application/json"},timeout:15e3,validateStatus:function(s){return s>=200&&s<300}});return console.log("Boltz结果查询响应:",e.data),e.data}catch(e){console.error("Boltz结果查询失败:",e);let s="未知错误";e.response?s=`服务器错误: ${e.response.status} - ${((a=e.response.data)==null?void 0:a.msg)||((l=e.response.data)==null?void 0:l.message)||e.response.statusText}`:e.request?s="网络连接失败，请检查网络连接或联系管理员":s=`请求错误: ${e.message}`;const o=new Error(s);throw o.originalError=e,o}},$=async t=>{try{console.log("开始监控Boltz任务，任务ID:",t);let a=await F(t);console.log("初始状态检查结果:",a);const l=setInterval(async()=>{try{if(a=await F(t),console.log("轮询状态检查结果:",a),a&&a.data){const e=a.data.status||a.data.state;if(e==="completed"||e==="success"||e==="finished"){console.log("Boltz任务完成，获取结果..."),clearInterval(l);try{const s=await U(t);console.log("Boltz任务结果:",s),i.value.status="completed",i.value.results=s,i.value.error=null,d.value.boltz=!0,f.success("Boltz筛选完成！")}catch(s){console.error("获取Boltz结果失败:",s),i.value.status="failed",i.value.error=s.message,f.error(`获取Boltz结果失败: ${s.message}`)}}else e==="failed"||e==="error"?(console.log("Boltz任务失败"),clearInterval(l),i.value.status="failed",i.value.error=a.data.error||"任务执行失败",f.error(`Boltz任务失败: ${i.value.error}`)):(e==="pending"||e==="running"||e==="processing")&&(console.log("Boltz任务进行中..."),i.value.status="running")}}catch(e){console.error("Boltz任务监控出错:",e),clearInterval(l),i.value.status="failed",i.value.error=e.message,f.error(`Boltz任务失败: ${e.message}`)}},5e3);setTimeout(()=>{l&&(clearInterval(l),i.value.status!=="completed"&&(i.value.status="failed",i.value.error="任务超时",f.error("Boltz任务超时，请检查任务状态")))},12e5)}catch(a){throw console.error("Boltz任务监控启动失败:",a),i.value.status="failed",i.value.error=a.message,a}},O=async t=>{var a,l;try{console.log("开始调用Multiscore筛选API，Boltz结果数据:",t);let e=t;if(t&&t.data&&(e=t.data),!e||typeof e!="object")throw new Error("请求数据格式无效，必须是有效的JSON对象");console.log("Multiscore API请求数据 (JSON格式):",JSON.stringify(e,null,2)),console.log("请求数据类型:",typeof e),console.log("请求数据结构:",Object.keys(e));const s=await N({method:"post",url:"/multiscore/submit-async",headers:{"Content-Type":"application/json"},data:e,timeout:3e4,validateStatus:function(o){return o>=200&&o<300}});return console.log("Multiscore API响应结果:",s.data),s.data}catch(e){console.error("Multiscore API调用失败:",e);let s="未知错误";e.response?s=`服务器错误: ${e.response.status} - ${((a=e.response.data)==null?void 0:a.msg)||((l=e.response.data)==null?void 0:l.message)||e.response.statusText}`:e.request?s="网络连接失败，请检查网络连接或联系管理员":s=`请求错误: ${e.message}`;const o=new Error(s);throw o.originalError=e,o}},V=async t=>{var a;try{const l=await N.get(`/multiscore/task/${t}`),{data:e}=l.data;if(e.status==="success")clearInterval(x.value),E.value=100,z.value="completed",w.value="多重评分完成",await W(e.result_urls);else if(e.status==="failed"){console.log("Multiscore任务失败:",e.error||"未知错误"),clearInterval(x.value),z.value="failed",w.value=`任务失败: ${e.error||"未知错误"}`,m.value.status="failed",m.value.error=e.error||"未知错误",f.error(`Multiscore任务失败: ${e.error||"未知错误"}`),d.value.multiscore=!0;return}else e.status==="pending"||e.status==="running"?(E.value=e.progress||0,w.value=`任务进行中... ${e.progress||0}%`):console.warn("未知的任务状态:",e.status)}catch(l){if(console.error("Multiscore状态查询失败:",l),((a=l.response)==null?void 0:a.status)===404){clearInterval(x.value),z.value="failed",w.value="任务不存在",m.value.status="failed",m.value.error="任务不存在",f.error("Multiscore任务不存在");return}else{console.error("Multiscore状态查询网络错误:",l),z.value="failed",w.value=`查询失败: ${l.message}`,m.value.status="failed",m.value.error=l.message,f.error(`Multiscore状态查询失败: ${l.message}`);return}}},W=async t=>{try{console.log("获取Multiscore结果，URLs:",t);const l=(await N.get(t.detailed_results_json_url)).data;console.log("Multiscore详细结果:",l);let e=[];l.top_10_drugs&&Array.isArray(l.top_10_drugs)?e=l.top_10_drugs:l.top_drugs&&Array.isArray(l.top_drugs)?e=l.top_drugs:l.all_drugs&&Array.isArray(l.all_drugs)?e=l.all_drugs:(console.warn("未找到有效的药物结果数据"),e=[]),n.dispatch("setMultiscoreResults",{all_drugs:e,top_10_drugs:e.slice(0,10),top_drugs:e.slice(0,3)}),n.dispatch("setMultiscoreResultUrls",t),console.log("Multiscore结果处理完成，共",e.length,"个药物"),z.value="completed",w.value=`多重评分完成，共筛选出${e.length}个药物`,P.push("/filter-results")}catch(a){return console.error("获取Multiscore结果失败:",a),z.value="failed",w.value="获取结果失败",m.value.status="failed",m.value.error=a.message,f.error(`获取Multiscore结果失败: ${a.message}`),null}},J=async t=>{try{console.log("开始监控Multiscore任务，任务ID:",t),await V(t),x.value=setInterval(async()=>{try{await V(t)}catch(a){console.error("Multiscore任务监控出错:",a),clearInterval(x.value),z.value="failed",w.value="任务监控失败",m.value.status="failed",m.value.error=a.message,f.error(`Multiscore任务失败: ${a.message}`),d.value.multiscore=!0}},5e3),setTimeout(()=>{x.value&&(clearInterval(x.value),z.value!=="completed"&&(z.value="failed",w.value="任务超时",f.error("Multiscore任务超时，请检查任务状态")))},6e5)}catch(a){console.error("Multiscore任务监控启动失败:",a),z.value="failed",w.value="监控启动失败",m.value.status="failed",m.value.error=a.message,f.error(`Multiscore任务监控启动失败: ${a.message}`);return}},Z=async t=>{var a,l;if(t==="admet"){if(B.value.length===0){f.warning("请先在药物生成页面选择要筛选的药物");return}h.value=!0,p.value=0;try{const e=setInterval(()=>{p.value<80&&(p.value+=Math.random()*15)},200),s=await c(B.value);s.code===0&&s.data&&(g.value.totalDrugs=((a=s.data.results)==null?void 0:a.length)||0,g.value.passedDrugs=((l=s.data.passed_drugs)==null?void 0:l.length)||0,g.value.passedDrugsList=s.data.passed_drugs||[],g.value.allResults=s.data.results||[],console.log("ADMET筛选结果已存储:",g.value),n.dispatch("setGeneratedDrugs",g.value.passedDrugsList)),clearInterval(e),p.value=100,setTimeout(()=>{h.value=!1,d.value.admet=!0;const o=_.value.findIndex(M=>M.key===t);o!==-1&&(_.value[o].status="completed"),f.success(`ADMET筛选完成！从${g.value.totalDrugs}个候选药物中筛选出${g.value.passedDrugs}个`)},500)}catch(e){h.value=!1,p.value=0,f.error(`ADMET筛选失败: ${e.message}`)}}else if(t==="boltz"){if(!d.value.admet||g.value.passedDrugs===0){f.warning("请先完成ADMET筛选");return}h.value=!0,p.value=0;try{const e=setInterval(()=>{p.value<80&&(p.value+=Math.random()*15)},200),s=await q(g.value.passedDrugsList);if(s.code===0&&s.data)i.value.taskId=s.data.task_id||s.data.taskId,i.value.status="running",i.value.results=s.data,console.log("Boltz任务创建成功，任务ID:",i.value.taskId),clearInterval(e),p.value=100,setTimeout(()=>{h.value=!1,console.log("开始轮询Boltz任务状态..."),f.info("分子构象生成任务已创建，正在后台运行中..."),$(i.value.taskId).then(o=>{console.log("Boltz任务轮询完成，最终结果:",o)}).catch(o=>{console.error("Boltz任务轮询失败:",o)})},500);else throw new Error("Boltz任务创建失败")}catch(e){h.value=!1,p.value=0,i.value.status="failed",i.value.error=e.message,f.error(`Boltz筛选失败: ${e.message}`)}}else if(t==="multiscore"){if(!d.value.boltz||!i.value.results){f.warning("请先完成Boltz筛选");return}h.value=!0,p.value=0;try{const e=setInterval(()=>{p.value<80&&(p.value+=Math.random()*15)},200),s=await O(i.value.results);if(s.code===0&&s.data)m.value.taskId=s.data.task_id,m.value.status="running",m.value.results=s.data,console.log("Multiscore任务创建成功，任务ID:",m.value.taskId),clearInterval(e),p.value=100,setTimeout(()=>{h.value=!1,console.log("开始轮询Multiscore任务状态..."),f.info("综合评分筛选任务已创建，正在后台运行中..."),J(m.value.taskId).then(o=>{console.log("Multiscore任务轮询完成，最终结果:",o)}).catch(o=>{console.error("Multiscore任务轮询失败:",o)})},500);else throw new Error("Multiscore任务创建失败")}catch(e){h.value=!1,p.value=0,m.value.status="failed",m.value.error=e.message,f.error(`Multiscore筛选失败: ${e.message}`)}}else{h.value=!0,p.value=0;const e=setInterval(()=>{p.value<90&&(p.value+=Math.random()*15)},200);setTimeout(()=>{p.value=100,clearInterval(e),setTimeout(()=>{h.value=!1,d.value[t]=!0;const s=_.value.findIndex(o=>o.key===t);s!==-1&&(_.value[s].status="completed"),f.success(`${G(t)}完成！`)},500)},3e3)}},ee=()=>{const t=_.value.findIndex(a=>a.key===r.value);if(t<_.value.length-1){_.value[t].status="completed";const a=_.value[t+1].key;r.value=a,_.value[t+1].status="current",h.value=!1,p.value=0,r.value==="boltz"&&d.value.admet&&(d.value.admet=!0),r.value==="multiscore"&&d.value.boltz&&(d.value.boltz=!0)}},te=()=>{f.success("筛选完成！跳转到结果页面..."),setTimeout(()=>{P.push("/filter-results")},1500)},G=t=>{const a=_.value.find(l=>l.key===t);return a?a.label:t},ae=()=>{const t=_.value.find(a=>a.key===r.value);return t?t.label:"当前步骤"},se=()=>{switch(r.value){case"admet":return"评估药物的吸收、分布、代谢、排泄和毒性特性，确保药物具有良好的药代动力学性质";case"boltz":return"基于AI模拟架构预测，为候选药物生成3D分子构象，分析分子稳定性和空间结构";case"multiscore":return"综合多种评分指标进行最终筛选，包括药效学、毒理学和药代动力学等多个维度";default:return"请选择筛选步骤开始药物筛选流程"}},re=j(()=>{switch(r.value){case"admet":return d.value.admet;case"boltz":return d.value.boltz;case"multiscore":return d.value.multiscore;default:return!1}}),le=j(()=>d.value.admet&&d.value.boltz&&d.value.multiscore),oe=()=>{d.value={admet:!1,boltz:!1,multiscore:!1},g.value={totalDrugs:0,passedDrugs:0,passedDrugsList:[],allResults:[]},i.value={taskId:null,status:"pending",results:null,error:null},m.value={taskId:null,status:"pending",results:null,error:null,progress:0},_.value.forEach((t,a)=>{a===0?t.status="current":t.status="pending"}),r.value="admet",h.value=!1,p.value=0,f.info("筛选流程已重置")},ne=()=>{const t=Object.values(d.value).filter(Boolean).length,a=_.value.length;return{completed:t,total:a,percentage:Math.round(t/a*100)}},ie=()=>r.value==="admet"?d.value.admet?"completed":"current":r.value==="boltz"?d.value.boltz?"completed":"current":r.value==="multiscore"?d.value.multiscore?"completed":"current":"",ue=()=>r.value==="admet"?d.value.admet?"已完成":"进行中":r.value==="boltz"?d.value.boltz?"已完成":"进行中":r.value==="multiscore"?d.value.multiscore?"已完成":"进行中":"请选择筛选步骤开始";return _e(()=>{console.log("DrugFiltering页面加载，选中的药物数量:",B.value.length),console.log("选中的药物详情:",B.value),B.value.length===0&&f.info("未检测到选中的药物，请返回药物生成页面选择药物");const t=n.getters.generatedDrugs;t&&Array.isArray(t)&&t.length>0&&t[0].overall_score!==void 0&&console.log("检测到可能的ADMET筛选结果，尝试恢复状态")}),{filterSteps:_,currentStep:r,isFiltering:h,filterProgress:p,stepCompleted:d,selectedDrugs:B,admetResults:g,boltzData:i,multiscoreData:m,multiscoreProgress:E,multiscoreStatus:z,multiscoreStatusText:w,startFilter:Z,nextStep:ee,viewResults:te,getStepLabel:G,getCurrentStepTitle:ae,getCurrentStepDescription:se,canProceedToNext:re,allStepsCompleted:le,resetFiltering:oe,getFilteringSummary:ne,getCurrentStepStatusClass:ie,getCurrentStepStatusText:ue,checkBoltzStatus:F,pollBoltzStatus:$,getBoltzResult:U,callMultiscoreAPI:O,checkMultiscoreStatus:V,multiscoreTaskMonitoring:J,getMultiscoreResult:W}}},ze={class:"drug-filtering"},Ae={class:"background-decoration"},Me={class:"particle-container"},De={class:"header"},xe={class:"filtering-container"},Ie={class:"steps-display"},Be={class:"step-number"},Se={class:"step-number-text"},Ne={class:"step-svg-container"},Ee={width:"100",height:"100",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Fe={key:0},Te={key:1},Pe={key:2},Re={class:"step-label"},Le={class:"step-description"},Qe={key:0},qe={key:0},Ve={key:1,class:"result-summary"},je={key:1},Ue={key:0},$e={key:1,class:"result-summary boltz-summary"},Oe={key:2},We={class:"step-actions-container"},Je={key:6,class:"step-progress"},Ge={class:"step-progress-bar"},He={class:"step-progress-text"},Ke={class:"step-progress-status"},Xe={key:0},Ye={key:1},Ze={key:2},et={key:7,class:"step-progress"},tt={class:"step-status"};function at(P,n,_,r,h,p){const d=I("ArrowLeft"),g=I("el-icon"),i=I("el-button"),m=I("VideoPlay"),E=I("ArrowRight"),z=I("View"),w=I("Loading"),x=I("Check"),B=I("Clock");return u(),b("div",ze,[v("div",Ae,[n[4]||(n[4]=Q('<div class="floating-shapes" data-v-7f9d2b56><div class="shape shape-1" data-v-7f9d2b56></div><div class="shape shape-2" data-v-7f9d2b56></div><div class="shape shape-3" data-v-7f9d2b56></div><div class="shape shape-4" data-v-7f9d2b56></div><div class="shape shape-5" data-v-7f9d2b56></div></div>',1)),v("div",Me,[(u(),b(K,null,X(20,c=>v("div",{class:"particle",key:c,style:Y({"--delay":`${c*.1}s`})},null,4)),64))])]),v("div",De,[y(i,{onClick:n[0]||(n[0]=c=>P.$router.push("/target-drugs")),type:"text",class:"back-btn"},{default:k(()=>[y(g,null,{default:k(()=>[y(d)]),_:1}),n[5]||(n[5]=S(" 返回药物生成 ",-1))]),_:1,__:[5]}),n[6]||(n[6]=v("div",{class:"title-container"},[v("h1",null,"药物筛选"),v("p",{class:"subtitle"},"通过多步骤筛选优化药物候选物")],-1))]),v("div",xe,[v("div",Ie,[(u(!0),b(K,null,X(r.filterSteps,(c,q)=>(u(),b("div",{key:c.key,class:we(["step-item",{completed:c.status==="completed",current:c.status==="current",pending:c.status==="pending"}])},[v("div",Be,[v("span",Se,T(q+1),1),n[7]||(n[7]=v("div",{class:"step-number-glow"},null,-1))]),v("div",Ne,[(u(),b("svg",Ee,[c.key==="admet"?(u(),b("g",Fe,n[8]||(n[8]=[Q('<circle cx="50" cy="50" r="45" fill="none" stroke="#4CAF50" stroke-width="2.5" opacity="0.8" data-v-7f9d2b56><animate attributeName="stroke-dasharray" values="0,283;283,0" dur="2s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle><circle cx="35" cy="35" r="6" fill="#4CAF50" data-v-7f9d2b56><animate attributeName="r" values="6;8;6" dur="1.5s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle><circle cx="65" cy="35" r="6" fill="#4CAF50" data-v-7f9d2b56><animate attributeName="r" values="6;8;6" dur="1.5s" repeatCount="indefinite" begin="0.5s" data-v-7f9d2b56></animate></circle><circle cx="35" cy="65" r="6" fill="#4CAF50" data-v-7f9d2b56><animate attributeName="r" values="6;8;6" dur="1.5s" repeatCount="indefinite" begin="1s" data-v-7f9d2b56></animate></circle><circle cx="65" cy="65" r="6" fill="#4CAF50" data-v-7f9d2b56><animate attributeName="r" values="6;8;6" dur="1.5s" repeatCount="indefinite" begin="1.5s" data-v-7f9d2b56></animate></circle><line x1="35" y1="35" x2="65" y2="35" stroke="#4CAF50" stroke-width="2" data-v-7f9d2b56><animate attributeName="stroke-width" values="2;3;2" dur="2s" repeatCount="indefinite" data-v-7f9d2b56></animate></line><line x1="35" y1="35" x2="35" y2="65" stroke="#4CAF50" stroke-width="2" data-v-7f9d2b56><animate attributeName="stroke-width" values="2;3;2" dur="2s" repeatCount="indefinite" begin="0.5s" data-v-7f9d2b56></animate></line><line x1="65" y1="35" x2="65" y2="65" stroke="#4CAF50" stroke-width="2" data-v-7f9d2b56><animate attributeName="stroke-width" values="2;3;2" dur="2s" repeatCount="indefinite" begin="1s" data-v-7f9d2b56></animate></line><line x1="35" y1="65" x2="65" y2="65" stroke="#4CAF50" stroke-width="2" data-v-7f9d2b56><animate attributeName="stroke-width" values="2;3;2" dur="2s" repeatCount="indefinite" begin="1.5s" data-v-7f9d2b56></animate></line><circle cx="50" cy="50" r="15" fill="none" stroke="#8BC34A" stroke-width="2" opacity="0.6" data-v-7f9d2b56><animate attributeName="r" values="15;25;15" dur="2s" repeatCount="indefinite" data-v-7f9d2b56></animate><animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle><circle cx="50" cy="50" r="8" fill="none" stroke="#4CAF50" stroke-width="1.5" opacity="0.4" data-v-7f9d2b56><animate attributeName="r" values="8;12;8" dur="1.5s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle>',11)]))):C("",!0),c.key==="boltz"?(u(),b("g",Te,n[9]||(n[9]=[Q('<circle cx="50" cy="50" r="45" fill="none" stroke="#66BB6A" stroke-width="2.5" opacity="0.8" data-v-7f9d2b56><animate attributeName="stroke-dasharray" values="0,283;283,0" dur="2s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle><path d="M25 50 Q50 25 75 50 Q50 75 25 50" fill="none" stroke="#66BB6A" stroke-width="3" stroke-linecap="round" data-v-7f9d2b56><animate attributeName="stroke-dasharray" values="0,200;200,0" dur="2.5s" repeatCount="indefinite" data-v-7f9d2b56></animate></path><circle cx="50" cy="50" r="8" fill="#66BB6A" data-v-7f9d2b56><animate attributeName="r" values="8;12;8" dur="1.5s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle><path d="M20 60 Q30 55 40 60 Q50 65 60 60 Q70 55 80 60" fill="none" stroke="#81C784" stroke-width="2" opacity="0.7" data-v-7f9d2b56><animate attributeName="d" values="M20 60 Q30 55 40 60 Q50 65 60 60 Q70 55 80 60;M20 60 Q30 65 40 60 Q50 55 60 60 Q70 65 80 60;M20 60 Q30 55 40 60 Q50 65 60 60 Q70 55 80 60" dur="2s" repeatCount="indefinite" data-v-7f9d2b56></animate></path><circle cx="50" cy="50" r="20" fill="none" stroke="#81C784" stroke-width="2" opacity="0.6" data-v-7f9d2b56><animate attributeName="r" values="20;30;20" dur="1.5s" repeatCount="indefinite" data-v-7f9d2b56></animate><animate attributeName="opacity" values="0.6;1;0.6" dur="1.5s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle><circle cx="50" cy="50" r="12" fill="none" stroke="#66BB6A" stroke-width="1.5" opacity="0.4" data-v-7f9d2b56><animate attributeName="r" values="12;18;12" dur="1s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle>',6)]))):C("",!0),c.key==="multiscore"?(u(),b("g",Pe,n[10]||(n[10]=[Q('<circle cx="50" cy="50" r="45" fill="none" stroke="#43A047" stroke-width="2.5" opacity="0.8" data-v-7f9d2b56><animate attributeName="stroke-dasharray" values="0,283;283,0" dur="2s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle><rect x="30" y="30" width="40" height="40" fill="none" stroke="#43A047" stroke-width="2.5" rx="5" data-v-7f9d2b56><animate attributeName="stroke-dasharray" values="0,160;160,0" dur="2.5s" repeatCount="indefinite" data-v-7f9d2b56></animate></rect><circle cx="38" cy="38" r="3" fill="#43A047" data-v-7f9d2b56><animate attributeName="r" values="3;5;3" dur="1.5s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle><circle cx="62" cy="38" r="3" fill="#43A047" data-v-7f9d2b56><animate attributeName="r" values="3;5;3" dur="1.5s" repeatCount="indefinite" begin="0.3s" data-v-7f9d2b56></animate></circle><circle cx="38" cy="62" r="3" fill="#43A047" data-v-7f9d2b56><animate attributeName="r" values="3;5;3" dur="1.5s" repeatCount="indefinite" begin="0.6s" data-v-7f9d2b56></animate></circle><circle cx="62" cy="62" r="3" fill="#43A047" data-v-7f9d2b56><animate attributeName="r" values="3;5;3" dur="1.5s" repeatCount="indefinite" begin="0.9s" data-v-7f9d2b56></animate></circle><line x1="30" y1="50" x2="70" y2="50" stroke="#2E7D32" stroke-width="2" opacity="0.6" data-v-7f9d2b56><animate attributeName="stroke-width" values="2;4;2" dur="2s" repeatCount="indefinite" data-v-7f9d2b56></animate></line><line x1="50" y1="30" x2="50" y2="70" stroke="#2E7D32" stroke-width="2" opacity="0.6" data-v-7f9d2b56><animate attributeName="stroke-width" values="2;4;2" dur="2s" repeatCount="indefinite" begin="1s" data-v-7f9d2b56></animate></line><circle cx="50" cy="50" r="25" fill="none" stroke="#2E7D32" stroke-width="2" opacity="0.6" data-v-7f9d2b56><animate attributeName="r" values="25;35;25" dur="1s" repeatCount="indefinite" data-v-7f9d2b56></animate><animate attributeName="opacity" values="0.6;1;0.6" dur="1s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle><circle cx="50" cy="50" r="15" fill="none" stroke="#43A047" stroke-width="1.5" opacity="0.4" data-v-7f9d2b56><animate attributeName="r" values="15;22;15" dur="0.8s" repeatCount="indefinite" data-v-7f9d2b56></animate></circle>',10)]))):C("",!0)]))]),v("div",Re,T(c.label),1),v("div",Le,[c.key==="admet"?(u(),b("span",Qe,[r.stepCompleted.admet?(u(),b("span",Ve," 从"+T(r.admetResults.totalDrugs)+"个候选药物中筛选出"+T(r.admetResults.passedDrugs)+"个 ",1)):(u(),b("span",qe,"药物代谢特性评估与早期成药性预测"))])):c.key==="boltz"?(u(),b("span",je,[r.stepCompleted.boltz?(u(),b("span",$e," 已为"+T(r.admetResults.passedDrugs)+"个候选药物生成分子构象 ",1)):(u(),b("span",Ue,"分子构象生成与结合模式模拟"))])):c.key==="multiscore"?(u(),b("span",Oe,"基于整合评分的候选分子优先级筛选")):C("",!0)]),v("div",We,[c.key==="admet"&&!r.isFiltering&&!r.stepCompleted.admet&&r.currentStep==="admet"?(u(),D(i,{key:0,type:"primary",size:"small",onClick:n[1]||(n[1]=F=>r.startFilter("admet")),class:"step-action-btn start-btn"},{default:k(()=>[y(g,null,{default:k(()=>[y(m)]),_:1}),n[11]||(n[11]=S(" 开始筛选 ",-1))]),_:1,__:[11]})):C("",!0),c.key==="admet"&&r.stepCompleted.admet&&!r.isFiltering&&r.currentStep==="admet"?(u(),D(i,{key:1,type:"success",size:"small",onClick:r.nextStep,class:"step-action-btn next-btn"},{default:k(()=>[y(g,null,{default:k(()=>[y(E)]),_:1}),n[12]||(n[12]=S(" 下一步 ",-1))]),_:1,__:[12]},8,["onClick"])):C("",!0),c.key==="boltz"&&!r.isFiltering&&!r.stepCompleted.boltz&&r.currentStep==="boltz"&&r.boltzData.status!=="running"?(u(),D(i,{key:2,type:"primary",size:"small",onClick:n[2]||(n[2]=F=>r.startFilter("boltz")),class:"step-action-btn start-btn"},{default:k(()=>[y(g,null,{default:k(()=>[y(m)]),_:1}),n[13]||(n[13]=S(" 开始生成 ",-1))]),_:1,__:[13]})):C("",!0),c.key==="boltz"&&r.stepCompleted.boltz&&!r.isFiltering&&r.currentStep==="boltz"?(u(),D(i,{key:3,type:"success",size:"small",onClick:r.nextStep,class:"step-action-btn next-btn"},{default:k(()=>[y(g,null,{default:k(()=>[y(E)]),_:1}),n[14]||(n[14]=S(" 下一步 ",-1))]),_:1,__:[14]},8,["onClick"])):C("",!0),c.key==="multiscore"&&!r.isFiltering&&!r.stepCompleted.multiscore&&r.currentStep==="multiscore"&&r.multiscoreData.status!=="running"?(u(),D(i,{key:4,type:"primary",size:"small",onClick:n[3]||(n[3]=F=>r.startFilter("multiscore")),class:"step-action-btn start-btn"},{default:k(()=>[y(g,null,{default:k(()=>[y(m)]),_:1}),n[15]||(n[15]=S(" 开始筛选 ",-1))]),_:1,__:[15]})):C("",!0),c.key==="multiscore"&&r.stepCompleted.multiscore&&!r.isFiltering&&r.currentStep==="multiscore"?(u(),D(i,{key:5,type:"success",size:"small",onClick:r.viewResults,class:"step-action-btn results-btn"},{default:k(()=>[y(g,null,{default:k(()=>[y(z)]),_:1}),n[16]||(n[16]=S(" 查看结果 ",-1))]),_:1,__:[16]},8,["onClick"])):C("",!0),c.key===r.currentStep&&r.isFiltering?(u(),b("div",Je,[v("div",Ge,[v("div",{class:"step-progress-fill",style:Y({width:r.filterProgress+"%"})},null,4)]),v("span",He,T(Math.round(r.filterProgress))+"%",1),v("div",Ke,[r.currentStep==="admet"?(u(),b("span",Xe,"正在分析分子结构...")):r.currentStep==="boltz"?(u(),b("span",Ye,"正在生成分子构象...")):r.currentStep==="multiscore"?(u(),b("span",Ze,"正在计算综合评分...")):C("",!0)])])):C("",!0),c.key==="boltz"&&r.boltzData.status==="running"&&r.currentStep==="boltz"?(u(),b("div",et,n[17]||(n[17]=[v("div",{class:"step-progress-bar"},[v("div",{class:"step-progress-fill running-progress",style:{width:"100%"}})],-1),v("span",{class:"step-progress-text"},"生成中...",-1),v("div",{class:"step-progress-status"},[v("span",null,"正在为候选药物生成3D分子构象，请耐心等待...")],-1)]))):C("",!0),c.key==="multiscore"&&r.multiscoreData.status==="running"&&r.currentStep==="multiscore"?(u(),D(i,{key:8,type:"warning",size:"small",disabled:"",class:"step-action-btn running-btn"},{default:k(()=>[y(g,null,{default:k(()=>[y(w)]),_:1}),n[18]||(n[18]=S(" 评分计算中... ",-1))]),_:1,__:[18]})):C("",!0)]),v("div",tt,[c.status==="completed"?(u(),D(g,{key:0},{default:k(()=>[y(x)]),_:1})):c.status==="current"?(u(),D(g,{key:1},{default:k(()=>[y(w)]),_:1})):(u(),D(g,{key:2},{default:k(()=>[y(B)]),_:1}))])],2))),128))])])])}const ot=de(Ce,[["render",at],["__scopeId","data-v-7f9d2b56"]]);export{ot as default};
