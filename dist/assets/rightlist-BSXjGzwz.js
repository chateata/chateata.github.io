const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dr8YfNte.js","assets/index-NIGUFBhG.js"])))=>i.map(i=>d[i]);
import{_ as R,c as I,o as p,b as l,e as m,w as c,f as y,F as j,q as C,m as O,g as b,E as x,aa as S,n as E}from"./index-BaLn3tjY.js";import{L as P,i as L}from"./index-Bn9PLWWT.js";const v={props:{detailObj:{type:Object,default:()=>({})}},data(){return{aid:"",haslogin:!1,userId:"",submenus:[{index:"1",title:"理化性质",items:[]},{index:"2",title:"吸收(A)",items:[]},{index:"3",title:"分布(D)",items:[]},{index:"4",title:"代谢(M)",items:[]},{index:"5",title:"排泄(E)",items:[]},{index:"6",title:"宏观毒性(T)",items:[]},{index:"7",title:"微观毒性(T)",items:[]},{index:"8",title:"副作用预测",items:[]}]}},methods:{fetchSubmenuItems(){setTimeout(()=>{var a,_,g,u,o,i,D,h;const r={"Molecular Weight":"分子量(Molecular Weight)","Heavy Atom Count":"重原子数(Heavy Atom Count)","Rotatable Bonds":"可旋转键数(Rotatable Bonds)","H-Bond Acceptors":"氢键受体数(H-Bond Acceptors)","H-Bond Donors":"氢键供体数(H-Bond Donors)","Ring Count":"环数(Ring Count)","Molar Refractivity":"摩尔折射率(Molar Refractivity)",TPSA:"拓扑极性表面积(TPSA)",LogP:"辛醇-水分配系数(LogP)",Plasma_Protein_Binding:"血浆蛋白结合率(Plasma Protein Binding)",tPSA:"拓扑极性表面积(TPSA)",logP:"辛醇-水分配系数(LogP)",clintox_clintox_FDA_APPROVED:"FDA批准药物预测(FDA Approved Drug Prediction)",clintox_clintox_CT_TOX:"细胞毒性预测(Cytotoxicity Prediction)",Toxicity_Score:"毒性评分(Toxicity Score)",Estimated_LD50:"预测半数致死量(Estimated LD50)",Estimated_Half_Life:"估计半衰期(Estimated Half-Life)",Estimated_Clearance:"估计清除率(Estimated Clearance)","tox21_tox21_NR-AR":"核受体-雄激素受体（Nuclear Receptor-Androgen Receptor）","tox21_tox21_NR-AR-LBD":"核受体-雄激素受体配体结合域（Nuclear Receptor-Androgen Receptor Ligand-Binding Domain）","tox21_tox21_NR-AhR":"核受体-芳香烃受体（Nuclear Receptor-Aryl hydrocarbon Receptor）","tox21_tox21_NR-Aromatase":"核受体-芳香化酶（Nuclear Receptor-Aromatase）","tox21_tox21_NR-ER":"核受体-雌激素受体（Nuclear Receptor-Estrogen Receptor）","tox21_tox21_NR-ER-LBD":"核受体-雌激素受体配体结合域（Nuclear Receptor-Estrogen Receptor Ligand-Binding Domain）","tox21_tox21_NR-PPAR-gamma":"核受体-过氧化物酶体增殖物激活受体γ（Nuclear Receptor-Peroxisome Proliferator-activated Receptor gamma）","tox21_tox21_SR-ARE":"应激反应-抗氧化应答元件（Stress Response-Antioxidant Response Element）","tox21_tox21_SR-ATAD5":"应激反应-ATAD5（Stress Response-ATAD5）","tox21_tox21_SR-HSE":"应激反应-热休克因子响应元件（Stress Response-Heat Shock Element）","tox21_tox21_SR-MMP":"应激反应-线粒体膜电位（Stress Response-Mitochondrial Membrane Potential）","tox21_tox21_SR-p53":"应激反应-p53（Stress Response-p53）",Site_1:"甲基(Methyl Group)",Site_2:"亚甲基(Methylene Group)",Site_3:"芳香氢(Aromatic Hydrogen)",Site_4:"羟基(Hydroxyl Group)",Site_5:"氨基(Amino Group)","sider_Hepatobiliary disorders":"肝胆系统疾病(Hepatobiliary Disorders)","sider_Metabolism and nutrition disorders":"代谢和营养障碍(Metabolism and Nutrition Disorders)","sider_Product issues":"药品相关问题(Product Issues)","sider_Eye disorders":"眼部疾病(Eye Disorders)",sider_Investigations:"检查(Investigations)","sider_Musculoskeletal and connective tissue disorders":"肌肉骨骼和结缔组织疾病(Musculoskeletal and Connective Tissue Disorders)","sider_Gastrointestinal disorders":"胃肠道疾病(Gastrointestinal Disorders)","sider_Social circumstances":"社会因素(Social Circumstances)","sider_Immune system disorders":"免疫系统疾病(Immune System Disorders)","sider_Reproductive system and breast disorders":"生殖系统和乳腺疾病(Reproductive System and Breast Disorders)","sider_Neoplasms benign, malignant and unspecified (incl cysts and polyps)":"良性、恶性和未明确性质的肿瘤(Neoplasms Benign, Malignant and Unspecified)","sider_General disorders and administration site conditions":"全身性疾病和给药部位反应(General Disorders and Administration Site Conditions)","sider_Endocrine disorders":"内分泌系统疾病(Endocrine Disorders)","sider_Surgical and medical procedures":"外科和医疗操作(Surgical and Medical Procedures)","sider_Vascular disorders":"血管疾病(Vascular Disorders)","sider_Blood and lymphatic system disorders":"血液和淋巴系统疾病(Blood and Lymphatic System Disorders)","sider_Skin and subcutaneous tissue disorders":"皮肤和皮下组织疾病(Skin and Subcutaneous Tissue Disorders)","sider_Congenital, familial and genetic disorders":"先天性、家族性和遗传性疾病(Congenital, Familial and Genetic Disorders)","sider_Infections and infestations":"感染和侵染(Infections and Infestations)","sider_Respiratory, thoracic and mediastinal disorders":"呼吸系统、胸腔和纵隔疾病(Respiratory, Thoracic and Mediastinal Disorders)","sider_Psychiatric disorders":"精神疾病(Psychiatric Disorders)","sider_Renal and urinary disorders":"肾脏和泌尿系统疾病(Renal and Urinary Disorders)","sider_Pregnancy, puerperium and perinatal conditions":"妊娠、产褥期和围产期状况(Pregnancy, Puerperium and Perinatal Conditions)","sider_Ear and labyrinth disorders":"耳和迷路疾病(Ear and Labyrinth Disorders)","sider_Cardiac disorders":"心脏疾病(Cardiac Disorders)","sider_Nervous system disorders":"神经系统疾病(Nervous System Disorders)","sider_Injury, poisoning and procedural complications":"损伤、中毒和手术并发症(Injury, Poisoning and Procedural Complications)"},e={Human_Intestinal_Absorption:"人体肠道吸收(Human Intestinal Absorption)",Bioavailability_Score:"生物利用度评分(Bioavailability Score)",bBBP:"脑血屏障穿透性(Blood-Brain Barrier Penetration)"};this.detailObj.Physical_Chemical_Properties&&(this.submenus[0].items=Object.entries(this.detailObj.Physical_Chemical_Properties).map(([t,s])=>{const n=r[t]||t,d=typeof s=="number"?s.toFixed(2):s;return{index:`1-${t}`,name:n,value:typeof s=="number"?parseFloat(d):s,confidence:"-"}})),(a=this.detailObj.ADMET_Properties)!=null&&a.Absorption&&(this.submenus[1].items=Object.entries(this.detailObj.ADMET_Properties.Absorption).map(([t,s])=>{const n=e[t]||t;if(typeof s=="object"){const d=s.predicted_class,f=s.confidence?s.confidence.toFixed(2):"-";return{index:`2-${t}`,name:n,value:d,confidence:f}}else if(typeof s=="number"){const d=s.toFixed(2);return{index:`2-${t}`,name:n,value:d,confidence:"-"}}else return{index:`2-${t}`,name:n,value:s,confidence:"-"}})),(_=this.detailObj.ADMET_Properties)!=null&&_.Distribution&&(this.submenus[2].items=Object.entries(this.detailObj.ADMET_Properties.Distribution).map(([t,s])=>{const n=r[t]||t;if(typeof s=="object"){const d=s.predicted_class,f=s.confidence?s.confidence.toFixed(2):"-";return{index:`3-${t}`,name:n,value:d,confidence:f}}else if(typeof s=="number"){const d=s.toFixed(2);return{index:`3-${t}`,name:n,value:d,confidence:"-"}}else return{index:`3-${t}`,name:n,value:s,confidence:"-"}})),(g=this.detailObj.ADMET_Properties)!=null&&g.Metabolism&&(this.submenus[3].items=Object.entries(this.detailObj.ADMET_Properties.Metabolism).map(([t,s])=>{const n=r[t]||t;return{index:`4-${t}`,name:n,value:typeof s=="number"?s.toFixed(2):s,confidence:"-"}})),(u=this.detailObj.ADMET_Properties)!=null&&u.Excretion&&(this.submenus[4].items=Object.entries(this.detailObj.ADMET_Properties.Excretion).map(([t,s])=>{const n=r[t]||t;return{index:`5-${t}`,name:n,value:typeof s=="number"?s.toFixed(2):s,confidence:"-"}})),(i=(o=this.detailObj.ADMET_Properties)==null?void 0:o.Toxicity)!=null&&i.Macro_Toxicity&&(this.submenus[5].items=Object.entries(this.detailObj.ADMET_Properties.Toxicity.Macro_Toxicity).map(([t,s])=>{const n=r[t]||t;if(typeof s=="object"){const d=s.predicted_class,f=s.confidence?s.confidence.toFixed(2):"-";return{index:`6-${t}`,name:n,value:d,confidence:f}}else if(typeof s=="number"){const d=s.toFixed(2);return{index:`6-${t}`,name:n,value:d,confidence:"-"}}else return{index:`6-${t}`,name:n,value:s,confidence:"-"}})),(h=(D=this.detailObj.ADMET_Properties)==null?void 0:D.Toxicity)!=null&&h.Micro_Toxicity&&(this.submenus[6].items=Object.entries(this.detailObj.ADMET_Properties.Toxicity.Micro_Toxicity).map(([t,s])=>({index:`7-${t}`,name:r[t]||t,value:s.predicted_class,confidence:s.confidence?s.confidence.toFixed(4):"-"}))),this.detailObj.SIDER_Predictions&&(this.submenus[7].items=Object.entries(this.detailObj.SIDER_Predictions).map(([t,s])=>({index:`8-${t}`,name:r[t]||t,value:s.predicted_class,confidence:s.confidence?s.confidence.toFixed(4):"-"})))},1e3)},handleOpen(r,e){},handleClose(r,e){},showInitDate:function(r,e){return r}},watch:{detailObj:{handler:"fetchSubmenuItems",deep:!0,immediate:!0}},components:{},created(){this.fetchSubmenuItems()}},T={class:"detailBox tcommonBox"},A={class:"content"},k={key:1,class:"no-data"};function w(r,e,a,_,g,u){const o=y("el-col"),i=y("el-row"),D=y("el-menu-item"),h=y("el-menu-item-group"),t=y("el-sub-menu"),s=y("el-menu");return p(),I("div",T,[e[3]||(e[3]=l("header",null,null,-1)),l("div",A,[m(i,null,{default:c(()=>[m(o,{span:24},{default:c(()=>[m(s,{"default-active":"1",class:"el-menu-vertical-demo",onOpen:u.handleOpen,onClose:u.handleClose},{default:c(()=>[(p(!0),I(j,null,C(g.submenus,n=>(p(),O(t,{key:n.index,index:n.index},{title:c(()=>[l("span",null,x(n.title),1)]),default:c(()=>[n.items&&n.items.length>0?(p(),O(h,{key:0},{title:c(()=>[m(i,null,{default:c(()=>[m(o,{span:11},{default:c(()=>e[0]||(e[0]=[b("名称",-1)])),_:1,__:[0]}),m(o,{span:7},{default:c(()=>e[1]||(e[1]=[b("数值",-1)])),_:1,__:[1]}),m(o,{span:4},{default:c(()=>e[2]||(e[2]=[b("置信度",-1)])),_:1,__:[2]})]),_:1})]),default:c(()=>[(p(!0),I(j,null,C(n.items,d=>(p(),O(D,{key:d.index,index:d.index},{default:c(()=>[m(i,{class:"form-row",gutter:10},{default:c(()=>[m(o,{span:11},{default:c(()=>[b(x(d.name),1)]),_:2},1024),m(o,{span:7},{default:c(()=>[b(x(d.value),1)]),_:2},1024),m(o,{span:4},{default:c(()=>[b(x(d.confidence),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["index"]))),128))]),_:2},1024)):(p(),I("div",k,"暂无数据"))]),_:2},1032,["index"]))),128))]),_:1},8,["onOpen","onClose"])]),_:1})]),_:1})])])}const ae=R(v,[["render",w]]),M={name:"RaddarChart",props:{detailObj:{type:Object,default:()=>({})},chartId:{type:String,default:"chart"}},data(){return{aid:-1,chart:null,radarChartData:{Properties:["分子量","LogP","TPSA","氢键受体数","氢键供体数","可旋转键数"],Values:[200,-.4,20,0,0,0],Upper_Limits:[500,5,140,10,5,10],Lower_Limits:[200,-.4,20,0,0,0]}}},methods:{updateChartData(){console.log("RaddarChart updateChartData called with detailObj:",this.detailObj),this.detailObj&&this.detailObj.Radar_Chart_Data?(console.log("Radar_Chart_Data found:",this.detailObj.Radar_Chart_Data),this.radarChartData.Properties=this.detailObj.Radar_Chart_Data.Properties||[],this.radarChartData.Values=this.detailObj.Radar_Chart_Data.Values||[],this.radarChartData.Lower_Limits=this.detailObj.Radar_Chart_Data.Lower_Limits||[],this.radarChartData.Upper_Limits=this.detailObj.Radar_Chart_Data.Upper_Limits||[],console.log("Updated radarChartData:",this.radarChartData),this.chart&&this.chart.dispose(),this.createChartHandler()):(console.log("No Radar_Chart_Data found in detailObj"),this.chart&&this.chart.dispose(),this.createChartHandler())},createChartHandler(){console.log("Creating chart...");const r=document.getElementById(this.chartId);if(!r){console.error("Chart element not found");return}this.chart&&this.chart.dispose(),this.chart=L(r);const e=this.getChartOption();console.log("Chart option:",e);try{this.chart.setOption(e),console.log("Chart created successfully"),window.addEventListener("resize",()=>{this.chart&&setTimeout(()=>{this.chart.resize()},100)})}catch(a){console.error("Error setting chart option:",a)}},getDefaultChartOption(){return{tooltip:{trigger:"item",confine:!0,textStyle:{fontSize:12},formatter:function(r){const e=a=>typeof a=="number"?a.toFixed(2):a;return`${r.name}: ${e(r.value)}`}},legend:{top:"bottom",data:["默认数据"],textStyle:{color:"#2c3e50",fontSize:13}},radar:{name:{textStyle:{color:"#2c3e50",fontSize:12,fontWeight:"bold",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:[4,6],borderRadius:4,lineHeight:14,width:80,overflow:"break"}},indicator:[{name:"分子量",max:500,min:0},{name:"LogP",max:5,min:-1},{name:"TPSA",max:140,min:0},{name:"氢键受体数",max:10,min:0},{name:"氢键供体数",max:5,min:0},{name:"可旋转键数",max:10,min:0}],center:["50%","50%"],radius:"60%",splitLine:{lineStyle:{color:"rgba(0, 0, 0, 0.2)"}},splitArea:{areaStyle:{color:["rgba(103, 194, 58, 0.05)","rgba(255, 255, 255, 0.1)"]}},axisLine:{lineStyle:{color:"rgba(0, 0, 0, 0.2)"}}},series:[{name:"默认数据",type:"radar",itemStyle:{color:"rgba(103, 194, 58, 1)",borderColor:"rgba(103, 194, 58, 0.8)",borderWidth:2},areaStyle:{color:"rgba(103, 194, 58, 0.2)"},lineStyle:{color:"rgba(103, 194, 58, 0.9)",width:2,type:"solid"},data:[{value:[200,-.4,20,0,0,0],name:"默认数据"}]}]}},getChartOption(){console.log("getChartOption called with radarChartData:",this.radarChartData);var{Properties:r,Values:e,Upper_Limits:a,Lower_Limits:_}=this.radarChartData;if(!r||!e||r.length===0||e.length===0)return console.log("Invalid data for chart, using default values"),this.getDefaultChartOption();const g=[],u=[],o=[],i=[];if(r.forEach((h,t)=>{h&&e[t]!==void 0&&e[t]!==null&&(g.push(h),u.push(e[t]),o.push(a[t]||100),i.push(_[t]||0))}),g.length===0)return console.log("No valid data found, using default values"),this.getDefaultChartOption();var D=g.map((h,t)=>{const s=o[t]||100,n=i[t]||0;let d,f;return s>100?(d=Math.ceil(s*1.05),f=Math.max(0,Math.floor(n*.95))):s>10?(d=Math.ceil(s*1.1),f=Math.max(0,Math.floor(n*.9))):(d=Math.ceil(s*1.15),f=Math.max(0,Math.floor(n*.85))),d-f<1&&(d=f+1),{name:h,max:d,min:f}});return{tooltip:{trigger:"item",confine:!0,textStyle:{fontSize:12},formatter:function(h){const t=s=>typeof s=="number"?s.toFixed(2):s;return h.seriesName==="实际值"?`${h.name}: ${t(h.value)}`:h.seriesName==="最佳范围"?`${h.name}: 上限 ${t(h.value)}`:h.name+": "+t(h.value)}},legend:{top:"bottom",data:[{name:"实际值",icon:"roundRect"},{name:"最佳范围",icon:"roundRect"}],textStyle:{color:"#2c3e50",fontSize:13}},radar:{name:{textStyle:{color:"#2c3e50",fontSize:12,fontWeight:"bold",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:[4,6],borderRadius:4,lineHeight:14,width:80,overflow:"break"}},indicator:D,center:["50%","50%"],radius:"60%",splitLine:{lineStyle:{color:"rgba(0, 0, 0, 0.2)"}},splitArea:{areaStyle:{color:["rgba(103, 194, 58, 0.05)","rgba(255, 255, 255, 0.1)","rgba(103, 194, 58, 0.05)","rgba(255, 255, 255, 0.1)","rgba(103, 194, 58, 0.05)"]}},axisLine:{lineStyle:{color:"rgba(0, 0, 0, 0.2)"}}},series:[{name:"最佳范围",type:"radar",areaStyle:{color:new P(0,0,0,1,[{offset:0,color:"rgba(103, 194, 58, 0.1)"},{offset:1,color:"rgba(133, 206, 97, 0.2)"}])},lineStyle:{color:"rgba(103, 194, 58, 0.5)",width:1.5,type:"dotted"},itemStyle:{color:"rgba(103, 194, 58, 0.5)",borderColor:"rgba(103, 194, 58, 0.5)",borderWidth:1},data:[{value:o,name:"最佳范围"}]},{name:"实际值",type:"radar",itemStyle:{color:"rgba(103, 194, 58, 1)",borderColor:"rgba(103, 194, 58, 0.8)",borderWidth:2},areaStyle:{color:new P(0,0,0,1,[{offset:0,color:"rgba(103, 194, 58, 0.2)"},{offset:1,color:"rgba(133, 206, 97, 0.1)"}])},lineStyle:{color:"rgba(103, 194, 58, 0.9)",width:2,type:"solid"},data:[{value:u,name:"实际值"}]}]}}},mounted(){console.log("RaddarChart component mounted"),this.createChartHandler(),this.$nextTick(()=>{this.detailObj&&this.detailObj.Radar_Chart_Data&&(console.log("Initial data found, updating chart"),this.updateChartData())})},watch:{detailObj:{handler:"updateChartData",deep:!0,immediate:!1}}},B={class:"chart-wrap"},N=["id"];function U(r,e,a,_,g,u){return p(),I("div",B,[l("div",{id:a.chartId,class:"chart"},null,8,N)])}const $=R(M,[["render",U],["__scopeId","data-v-ca452de6"]]),F={props:{detailObj:{type:Object,default:()=>({})},taskId:{type:String,default:""},chartId:{type:String,default:"chart"}},data(){return{aid:-1,isFixed:!1,fixDo:!1,loveme:!1,gotoTop:!1,going:!1,browseList:"",artCommentList:"",info:{molecular_Weight:0,smiles:"暂无数据"},result:{},url1:"",url2:"",internalTaskId:"",loadingImages:!1,imageErrors:{url1:!1,url2:!1}}},methods:{gotoLlm(){console.log("AI分析功能暂未实现"),alert("AI分析功能正在开发中...")},updateInfo(){var r;try{console.log("rightlist updateInfo called with detailObj:",this.detailObj),this.imageErrors.url1=!1,this.imageErrors.url2=!1,this.url1&&this.url1.startsWith("blob:")&&URL.revokeObjectURL(this.url1),this.url2&&this.url2.startsWith("blob:")&&URL.revokeObjectURL(this.url2),this.detailObj&&(this.info.smiles=this.detailObj.SMILES||"暂无数据",this.info.molecular_Weight=((r=this.detailObj.Physical_Chemical_Properties)==null?void 0:r["Molecular Weight"])||0,console.log("rightlist detailObj full structure:",JSON.stringify(this.detailObj,null,2)),console.log("rightlist props taskId:",this.taskId),console.log("rightlist detailObj keys:",Object.keys(this.detailObj)),console.log("=== DEBUG: TaskId Resolution ==="),console.log("this.detailObj.moleculeImageId:",this.detailObj.moleculeImageId),console.log("this.taskId (prop):",this.taskId),console.log("this.detailObj.task_id:",this.detailObj.task_id),console.log("this.detailObj.taskId:",this.detailObj.taskId),console.log("this.detailObj.batch_task_id:",this.detailObj.batch_task_id),console.log("this.detailObj.batchTaskId:",this.detailObj.batchTaskId),this.internalTaskId=this.detailObj.moleculeImageId||this.taskId||this.detailObj.task_id||this.detailObj.taskId||this.detailObj.batch_task_id||this.detailObj.batchTaskId||"",console.log("Final internalTaskId set to:",this.internalTaskId),console.log("=== END DEBUG ==="),this.internalTaskId?(console.log("TaskId found, calling loadDrugImages()"),this.loadDrugImages()):(this.url1="/src/assets/2d_structure_placeholder.svg",this.url2="/src/assets/3d_structure_placeholder.svg",console.log("No taskId found, using placeholder images")))}catch(e){console.log("updateInfo error:",e)}},handleImageError(r){console.log("Image load error:",r.target.src),r.target.alt.includes("2D")?this.imageErrors.url1=!0:r.target.alt.includes("3D")&&(this.imageErrors.url2=!0),r.target.style.display="none";const e=r.target.parentElement;if(e){const a=document.createElement("div");a.className="image-placeholder",a.innerHTML="<p>图片加载失败</p>",e.appendChild(a)}},handleImageLoad(r){console.log("Image loaded successfully:",r.target.src),r.target.src.startsWith("blob:")&&(this.imageErrors[r.target.alt.includes("2D")?"url1":"url2"]=!1)},async retryLoadImage(r){if(!this.internalTaskId){console.log("No taskId available for retry");return}console.log(`Retrying to load ${r} image for taskId:`,this.internalTaskId);try{const{visualizationAPI:e}=await S(async()=>{const{visualizationAPI:_}=await import("./index-Dr8YfNte.js");return{visualizationAPI:_}},__vite__mapDeps([0,1])),a=await e.getDrugImage(this.internalTaskId,r);a&&typeof a=="string"&&(r==="2d"?(this.url1=a,this.imageErrors.url1=!1):r==="3d"&&(this.url2=a,this.imageErrors.url2=!1),console.log(`${r} image retry successful`))}catch(e){console.log(`${r} image retry failed:`,e)}},async loadDrugImages(){var r,e,a,_,g,u;if(!this.internalTaskId||this.loadingImages){console.log("loadDrugImages skipped - taskId:",this.internalTaskId,"loadingImages:",this.loadingImages);return}console.log("loadDrugImages started for taskId:",this.internalTaskId),console.log("API endpoint will be: /api/drug/image/"+this.internalTaskId),this.loadingImages=!0;try{const{visualizationAPI:o}=await S(async()=>{const{visualizationAPI:i}=await import("./index-Dr8YfNte.js");return{visualizationAPI:i}},__vite__mapDeps([0,1]));console.log("visualizationAPI imported successfully");try{console.log("Fetching 2D image for taskId:",this.internalTaskId);const i=await o.getDrugImage(this.internalTaskId,"2d");console.log("2D image response:",i),console.log("2D image response type:",typeof i),i&&typeof i=="string"?(this.url1=i,console.log("2D image URL set:",this.url1),console.log("2D image URL starts with blob:",this.url1.startsWith("blob:"))):(this.url1="/src/assets/2d_structure_placeholder.svg",console.log("Using 2D placeholder image"))}catch(i){console.log("2D image load error:",i),console.log("2D image error details:",i.message,(r=i.response)==null?void 0:r.status,(e=i.response)==null?void 0:e.data),this.url1="/src/assets/2d_structure_placeholder.svg"}try{console.log("Fetching 3D image for taskId:",this.internalTaskId);const i=await o.getDrugImage(this.internalTaskId,"3d");console.log("3D image response:",i),console.log("3D image response type:",typeof i),i&&typeof i=="string"?(this.url2=i,console.log("3D image URL set:",this.url2),console.log("3D image URL starts with blob:",this.url2.startsWith("blob:"))):(this.url2="/src/assets/3d_structure_placeholder.svg",console.log("Using 3D placeholder image"))}catch(i){console.log("3D image load error:",i),console.log("3D image error details:",i.message,(a=i.response)==null?void 0:a.status,(_=i.response)==null?void 0:_.data),this.url2="/src/assets/3d_structure_placeholder.svg"}}catch(o){console.log("loadDrugImages error:",o),console.log("loadDrugImages error details:",o.message,(g=o.response)==null?void 0:g.status,(u=o.response)==null?void 0:u.data),this.url1="/src/assets/2d_structure_placeholder.svg",this.url2="/src/assets/3d_structure_placeholder.svg"}finally{this.loadingImages=!1,console.log("loadDrugImages completed"),console.log("Final URLs - url1:",this.url1,"url2:",this.url2)}}},watch:{detailObj:{handler:"updateInfo",deep:!0,immediate:!0},taskId:{handler:"updateInfo",immediate:!0}},components:{RaddarChart:$},created(){var r=this;window.onscroll=function(){if(!(!r||!r.going))try{var e=document.documentElement.scrollTop||document.body.scrollTop;r.going||(e>600?r.gotoTop=!0:r.gotoTop=!1),e>1200?r.fixDo=!0:r.fixDo=!1}catch(a){console.log("Scroll handler error:",a)}}},beforeUnmount(){window.onscroll=null,this.url1&&this.url1.startsWith("blob:")&&URL.revokeObjectURL(this.url1),this.url2&&this.url2.startsWith("blob:")&&URL.revokeObjectURL(this.url2),this.imageErrors.url1=!1,this.imageErrors.url2=!1}},H={class:"rightlistBox"},V={class:"r1-list"},W={class:"r1-img"},z={key:0,class:"loading-container"},G={key:1,class:"images-grid"},q={class:"image-container"},J={class:"image-wrapper"},X=["src"],K={key:0,class:"image-error"},Q={class:"image-container"},Y={class:"image-wrapper"},Z=["src"],ee={key:0,class:"image-error"},te={class:"r1-head"};function se(r,e,a,_,g,u){const o=y("el-col"),i=y("el-row"),D=y("el-button"),h=y("RaddarChart");return p(),I("div",H,[l("section",null,[l("div",V,[m(i,null,{default:c(()=>[m(o,null,{default:c(()=>[l("ul",null,[l("li",null,[m(i,null,{default:c(()=>[m(o,{span:8},{default:c(()=>e[6]||(e[6]=[b("SMILES:",-1)])),_:1,__:[6]}),m(o,{span:16},{default:c(()=>[b(x(this.info.smiles),1)]),_:1})]),_:1})]),l("li",null,[m(i,null,{default:c(()=>[m(o,{span:8},{default:c(()=>e[7]||(e[7]=[b("分子量:",-1)])),_:1,__:[7]}),m(o,{span:16},{default:c(()=>[b(x(this.info.molecular_Weight)+" g/mol",1)]),_:1})]),_:1})])]),l("div",W,[g.loadingImages?(p(),I("div",z,e[8]||(e[8]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"正在加载分子结构图...",-1)]))):(p(),I("div",G,[l("div",q,[l("div",J,[l("img",{src:g.url1||"/src/assets/2d_structure_placeholder.svg",alt:"2D结构图",onError:e[0]||(e[0]=(...t)=>u.handleImageError&&u.handleImageError(...t)),onLoad:e[1]||(e[1]=(...t)=>u.handleImageLoad&&u.handleImageLoad(...t)),class:"molecule-image"},null,40,X),e[9]||(e[9]=l("div",{class:"image-label"},"2D结构",-1))]),g.imageErrors.url1?(p(),I("div",K,[e[11]||(e[11]=l("i",{class:"el-icon-warning"},null,-1)),e[12]||(e[12]=l("span",null,"加载失败",-1)),m(D,{size:"mini",type:"primary",onClick:e[2]||(e[2]=t=>u.retryLoadImage("2d")),class:"retry-btn"},{default:c(()=>e[10]||(e[10]=[b(" 重试 ",-1)])),_:1,__:[10]})])):E("",!0)]),l("div",Q,[l("div",Y,[l("img",{src:g.url2||"/src/assets/3d_structure_placeholder.svg",alt:"3D结构图",onError:e[3]||(e[3]=(...t)=>u.handleImageError&&u.handleImageError(...t)),onLoad:e[4]||(e[4]=(...t)=>u.handleImageLoad&&u.handleImageLoad(...t)),class:"molecule-image"},null,40,Z),e[13]||(e[13]=l("div",{class:"image-label"},"3D结构",-1))]),g.imageErrors.url2?(p(),I("div",ee,[e[15]||(e[15]=l("i",{class:"el-icon-warning"},null,-1)),e[16]||(e[16]=l("span",null,"加载失败",-1)),m(D,{size:"mini",type:"primary",onClick:e[5]||(e[5]=t=>u.retryLoadImage("3d")),class:"retry-btn"},{default:c(()=>e[14]||(e[14]=[b(" 重试 ",-1)])),_:1,__:[14]})])):E("",!0)])]))])]),_:1})]),_:1})])]),l("section",null,[l("div",te,[m(h,{detailObj:a.detailObj,chartId:a.chartId},null,8,["detailObj","chartId"])]),e[17]||(e[17]=l("div",{class:"r1-body"},null,-1))])])}const oe=R(F,[["render",se]]);export{$ as R,ae as a,oe as r};
