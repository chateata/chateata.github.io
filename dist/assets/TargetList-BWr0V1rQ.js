import{_ as M,G as E,H as F,I as V,J as q,K as G,L as U,M as J,N as K,l as O,k as R,y as H,O as j,c as a,o as t,n as y,e as n,b as e,w as i,g as _,f as u,E as o,F as A,q as C,D as Q,A as W,m as p}from"./index-BaLn3tjY.js";import{diseaseAPI as X}from"./index-Dr8YfNte.js";const Y={name:"TargetList",components:{ArrowLeft:R,Loading:O,Document:K,Connection:J,Collection:U,Share:G,TrendCharts:q,MagicStick:V,ArrowDown:F,ArrowUp:E},props:{diseaseId:{type:String,required:!0},showHeader:{type:Boolean,default:!0}},emits:["back","select-target"],setup(T,{emit:h}){const I=W(),d=H(!1),v=H([]),w=H({}),f=H({}),r=async()=>{if(T.diseaseId){d.value=!0;try{const c=await X.getTargetsByDiseaseId(T.diseaseId);if(c.code===0&&c.data){v.value=c.data.results||[],I.dispatch("setTargetResults",v.value);const g={},D={};v.value.forEach(b=>{g[b.id]=!1,D[b.id]=!1}),w.value=g,f.value=D}else throw new Error(c.msg||"获取靶点失败")}catch(c){console.error("获取靶点失败:",c),v.value=[]}finally{d.value=!1}}},k=c=>{h("select-target",c)},S=(c,g)=>c?c.length<=g?c:c.substring(0,g)+"...":"",m=c=>{w.value={...w.value,[c]:!w.value[c]}},x=c=>{f.value={...f.value,[c]:!f.value[c]}};return j(()=>{r()}),{loading:d,targets:v,selectTarget:k,truncateText:S,showAllHomologues:w,showAllPathways:f,toggleHomologues:m,togglePathways:x}}},Z={key:0,class:"header"},$={key:1,class:"loading-container"},ss={key:2,class:"targets-container"},es={class:"summary"},ts={class:"targets-grid"},os={class:"target-header"},ns={class:"target-main-info"},ls={class:"target-id"},as={class:"target-symbol"},is={class:"target-meta"},cs={class:"score"},ds={class:"target-name"},_s={key:0,class:"target-section"},rs={class:"section-title"},us={class:"section-content"},hs={key:0},ys={key:1},ms={key:1,class:"target-section"},ps={class:"section-title"},fs={class:"section-content"},gs={class:"tags-container"},vs={class:"source"},ws={key:2,class:"target-section"},ks={class:"section-title"},As={class:"section-content"},Cs={class:"tags-container"},Is={class:"source"},bs={key:3,class:"target-section"},Ts={class:"section-title"},Ds={class:"section-content"},Hs={class:"homologues-list"},Ss={class:"homologue-symbol"},xs={class:"homologue-species"},zs={class:"homologue-type"},Ls={class:"homologue-identity"},Ps={key:0,class:"more-homologues"},Ns={key:4,class:"target-section"},Bs={class:"section-title"},Ms={class:"section-content"},Es={class:"pathways-list"},Fs={class:"pathway-name"},Vs={class:"pathway-id"},qs={class:"pathway-term"},Gs={key:0,class:"more-pathways"},Us={class:"target-actions"},Js={key:3,class:"no-results"};function Ks(T,h,I,d,v,w){const f=u("ArrowLeft"),r=u("el-icon"),k=u("el-button"),S=u("Loading"),m=u("el-tag"),x=u("Document"),c=u("Connection"),g=u("Collection"),D=u("Share"),b=u("ArrowDown"),z=u("ArrowUp"),L=u("TrendCharts"),P=u("MagicStick"),N=u("el-empty");return t(),a("div",{class:Q(["target-list",{"show-header":I.showHeader}])},[I.showHeader?(t(),a("div",Z,[n(k,{onClick:h[0]||(h[0]=s=>T.$emit("back")),type:"text",class:"back-btn"},{default:i(()=>[n(r,null,{default:i(()=>[n(f)]),_:1}),h[1]||(h[1]=_(" 返回疾病列表 ",-1))]),_:1,__:[1]}),e("h2",null,"疾病ID: "+o(I.diseaseId)+" 的相关靶点",1)])):y("",!0),d.loading?(t(),a("div",$,[n(r,{class:"is-loading"},{default:i(()=>[n(S)]),_:1}),h[2]||(h[2]=e("p",null,"正在搜索靶点信息...",-1))])):d.targets.length>0?(t(),a("div",ss,[e("div",es,[n(m,{type:"success",size:"large"},{default:i(()=>[_("共找到 "+o(d.targets.length)+" 个靶点",1)]),_:1})]),e("div",ts,[(t(!0),a(A,null,C(d.targets,s=>(t(),a("div",{key:s.id,class:"target-card"},[e("div",os,[e("div",ns,[e("div",ls,o(s.id),1),e("div",as,o(s.approvedSymbol),1)]),e("div",is,[n(m,{type:s.association_type==="direct"?"danger":"warning",size:"small"},{default:i(()=>[_(o(s.association_type==="direct"?"直接关联":"间接关联"),1)]),_:2},1032,["type"]),e("div",cs,"评分: "+o((s.score*100).toFixed(1))+"%",1)])]),e("div",ds,o(s.approvedName),1),s.functionDescriptions?(t(),a("div",_s,[e("h4",rs,[n(r,null,{default:i(()=>[n(x)]),_:1}),h[3]||(h[3]=_(" 功能描述 ",-1))]),e("div",us,[Array.isArray(s.functionDescriptions)?(t(),a("div",hs,[(t(!0),a(A,null,C(s.functionDescriptions,(l,B)=>(t(),a("div",{key:B,class:"description-item"},[e("p",null,o(d.truncateText(l,300)),1)]))),128))])):(t(),a("div",ys,[e("p",null,o(d.truncateText(s.functionDescriptions,300)),1)]))])])):y("",!0),s.proteinIds&&s.proteinIds.length>0?(t(),a("div",ms,[e("h4",ps,[n(r,null,{default:i(()=>[n(c)]),_:1}),_(" 蛋白质ID ("+o(s.proteinIds.length)+"个) ",1)]),e("div",fs,[e("div",gs,[(t(!0),a(A,null,C(s.proteinIds.slice(0,5),l=>(t(),p(m,{key:l.id,size:"small",type:"info",class:"data-tag"},{default:i(()=>[_(o(l.id)+" ",1),e("span",vs,"("+o(l.source)+")",1)]),_:2},1024))),128)),s.proteinIds.length>5?(t(),p(m,{key:0,size:"small",type:"warning"},{default:i(()=>[_(" +"+o(s.proteinIds.length-5)+"个 ",1)]),_:2},1024)):y("",!0)])])])):y("",!0),s.synonyms&&s.synonyms.length>0?(t(),a("div",ws,[e("h4",ks,[n(r,null,{default:i(()=>[n(g)]),_:1}),_(" 同义词 ("+o(s.synonyms.length)+"个) ",1)]),e("div",As,[e("div",Cs,[(t(!0),a(A,null,C(s.synonyms.slice(0,4),l=>(t(),p(m,{key:`${l.label}-${l.source}`,size:"small",type:"success",class:"data-tag"},{default:i(()=>[_(o(l.label)+" ",1),e("span",Is,"("+o(l.source)+")",1)]),_:2},1024))),128)),s.synonyms.length>4?(t(),p(m,{key:0,size:"small",type:"warning"},{default:i(()=>[_(" +"+o(s.synonyms.length-4)+"个 ",1)]),_:2},1024)):y("",!0)])])])):y("",!0),s.homologues&&s.homologues.length>0?(t(),a("div",bs,[e("h4",Ts,[n(r,null,{default:i(()=>[n(D)]),_:1}),_(" 同源基因 ("+o(s.homologues.length)+"个) ",1)]),e("div",Ds,[e("div",Hs,[(t(!0),a(A,null,C(s.homologues.slice(0,d.showAllHomologues[s.id]?s.homologues.length:3),l=>(t(),a("div",{key:l.targetGeneId,class:"homologue-item"},[e("span",Ss,o(l.targetGeneSymbol),1),e("span",xs,o(l.speciesName),1),e("span",zs,o(l.homologyType),1),e("span",Ls,o(l.queryPercentageIdentity.toFixed(1))+"%",1)]))),128)),s.homologues.length>3?(t(),a("div",Ps,[n(k,{type:"text",size:"small",class:"expand-btn",onClick:l=>d.toggleHomologues(s.id)},{default:i(()=>[d.showAllHomologues[s.id]?(t(),p(r,{key:1},{default:i(()=>[n(z)]),_:1})):(t(),p(r,{key:0},{default:i(()=>[n(b)]),_:1})),_(" "+o(d.showAllHomologues[s.id]?"收起":`+${s.homologues.length-3}个同源基因`),1)]),_:2},1032,["onClick"])])):y("",!0)])])])):y("",!0),s.pathways&&s.pathways.length>0?(t(),a("div",Ns,[e("h4",Bs,[n(r,null,{default:i(()=>[n(L)]),_:1}),_(" 相关通路 ("+o(s.pathways.length)+"个) ",1)]),e("div",Ms,[e("div",Es,[(t(!0),a(A,null,C(s.pathways.slice(0,d.showAllPathways[s.id]?s.pathways.length:3),l=>(t(),a("div",{key:l.pathwayId,class:"pathway-item"},[e("div",Fs,o(l.pathway),1),e("div",Vs,o(l.pathwayId),1),e("div",qs,o(l.topLevelTerm),1)]))),128)),s.pathways.length>3?(t(),a("div",Gs,[n(k,{type:"text",size:"small",class:"expand-btn",onClick:l=>d.togglePathways(s.id)},{default:i(()=>[d.showAllPathways[s.id]?(t(),p(r,{key:1},{default:i(()=>[n(z)]),_:1})):(t(),p(r,{key:0},{default:i(()=>[n(b)]),_:1})),_(" "+o(d.showAllPathways[s.id]?"收起":`+${s.pathways.length-3}个通路`),1)]),_:2},1032,["onClick"])])):y("",!0)])])])):y("",!0),e("div",Us,[n(k,{type:"primary",size:"large",class:"generate-drug-btn",onClick:l=>d.selectTarget(s)},{default:i(()=>[n(r,null,{default:i(()=>[n(P)]),_:1}),h[4]||(h[4]=_(" 生成对应药物 ",-1))]),_:2,__:[4]},1032,["onClick"])])]))),128))])])):(t(),a("div",Js,[n(N,{description:"暂无相关靶点信息"})]))],2)}const js=M(Y,[["render",Ks],["__scopeId","data-v-7d5ca432"]]);export{js as T};
